<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: Debugging</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Fri Sep 4 06:57:19 2009"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Categories</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Reference manual</a>&nbsp;&raquo&nbsp;<a class="el" href="page_topics.html">Topic Overviews</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="overview_debugging">Debugging </a></h1>Classes, functions and macros: <a class="el" href="classwx_debug_context.html" title="A class for performing various debugging and memory tracing operations.">wxDebugContext</a>, <a class="el" href="classwx_object.html" title="This is the root class of many of the wxWidgets classes.">wxObject</a>, <a class="el" href="classwx_log.html" title="wxLog class defines the interface for the log targets used by wxWidgets logging functions...">wxLog</a>, <a class="el" href="group__group__funcmacro__log.html">Logging</a>, <a class="el" href="group__group__funcmacro__debug.html">Debugging</a><p>
Various classes, functions and macros are provided in wxWidgets to help you debug your application. Most of these are only available if you compile both wxWidgets, your application and <em>all</em> libraries that use wxWidgets with the __WXDEBUG__ symbol defined. You can also test the __WXDEBUG__ symbol in your own applications to execute code that should be active only in debug mode.<p>
<ul>
<li><a class="el" href="overview_debugging.html#overview_debugging_dbgctx">wxDebugContext</a> </li>
<li><a class="el" href="overview_debugging.html#overview_debugging_dbgmacros">Debug macros</a> </li>
<li><a class="el" href="overview_debugging.html#overview_debugging_logging">Logging functions</a> </li>
<li><a class="el" href="overview_debugging.html#overview_debugging_dbgctx2">wxDebugContext overview</a></li>
</ul>
<hr>
<h2><a class="anchor" name="overview_debugging_dbgctx">
wxDebugContext</a></h2>
<a class="el" href="classwx_debug_context.html" title="A class for performing various debugging and memory tracing operations.">wxDebugContext</a> is a class that never gets instantiated, but ties together various static functions and variables. It allows you to dump all objects to that stream, write statistics about object allocation, and check memory for errors.<p>
It is good practice to define a wxObject::Dump member function for each class you derive from a wxWidgets class, so that <a class="el" href="classwx_debug_context.html#f9cb40d2b9fda1812c4d073facde67bb" title="Performs a memory dump from the currently set checkpoint, writing to the current...">wxDebugContext::Dump</a> can call it and give valuable information about the state of the application.<p>
If you have difficulty tracking down a memory leak, recompile in debugging mode and call <a class="el" href="classwx_debug_context.html#f9cb40d2b9fda1812c4d073facde67bb" title="Performs a memory dump from the currently set checkpoint, writing to the current...">wxDebugContext::Dump</a> and <a class="el" href="classwx_debug_context.html#675ad7ff0b4643cd75a30632dc64c0c9" title="Performs a statistics analysis from the currently set checkpoint, writing to the...">wxDebugContext::PrintStatistics</a> at appropriate places. They will tell you what objects have not yet been deleted, and what kinds of object they are. In fact, in debug mode wxWidgets will automatically detect memory leaks when your application is about to exit, and if there are any leaks, will give you information about the problem. (How much information depends on the operating system and compiler -- some systems don't allow all memory logging to be enabled). See the memcheck sample for example of usage.<p>
For <a class="el" href="classwx_debug_context.html" title="A class for performing various debugging and memory tracing operations.">wxDebugContext</a> to do its work, the <em>new</em> and <em>delete</em> operators for <a class="el" href="classwx_object.html" title="This is the root class of many of the wxWidgets classes.">wxObject</a> have been redefined to store extra information about dynamically allocated objects (but not statically declared objects).<p>
This slows down a debugging version of an application, but can find difficult-to-detect memory leaks (objects are not deallocated), overwrites (writing past the end of your object) and underwrites (writing to memory in front of the object).<p>
If debugging mode is on and the symbols wxUSE_GLOBAL_MEMORY_OPERATORS and wxUSE_DEBUG_NEW_ALWAYS are set to 1 in setup.h, 'new' is defined to be:<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#define new new(__FILE__,__LINE__)</span>
</pre></div><p>
All occurrences of 'new' in wxWidgets and your own application will use the overridden form of the operator with two extra arguments. This means that the debugging output (and error messages reporting memory problems) will tell you what file and on what line you allocated the object. Unfortunately not all compilers allow this definition to work properly, but most do.<h2><a class="anchor" name="overview_debugging_dbgmacros">
Debug macros</a></h2>
You should also use <a class="el" href="group__group__funcmacro__debug.html">Debugging</a> as part of a 'defensive programming' strategy, scattering wxASSERTs liberally to test for problems in your code as early as possible. Forward thinking will save a surprising amount of time in the long run.<p>
<a class="el" href="group__group__funcmacro__debug.html#g204cc264ee560b67e6c6467ba8ffee5f" title="Assert macro.">wxASSERT</a> is used to pop up an error message box when a condition is not <span class="literal">true</span>. You can also use <a class="el" href="group__group__funcmacro__debug.html#g0224638a009ef6a78e09c0d3bb61c379" title="Assert macro with message.">wxASSERT_MSG</a> to supply your own helpful error message. For example:<p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> MyClass::MyFunction(<a class="code" href="classwx_object.html" title="This is the root class of many of the wxWidgets classes.">wxObject</a>* <span class="keywordtype">object</span>)
{
    <a class="code" href="group__group__funcmacro__debug.html#g0224638a009ef6a78e09c0d3bb61c379" title="Assert macro with message.">wxASSERT_MSG</a>( (<span class="keywordtype">object</span> != NULL), <span class="stringliteral">"object should not be NULL in MyFunction!"</span> );

    ...
};
</pre></div><p>
The message box allows you to continue execution or abort the program. If you are running the application inside a debugger, you will be able to see exactly where the problem was.<h2><a class="anchor" name="overview_debugging_logging">
Logging functions</a></h2>
You can use the wxLogDebug and wxLogTrace functions to output debugging information in debug mode; it will do nothing for non-debugging code.<h2><a class="anchor" name="overview_debugging_dbgctx2">
wxDebugContext overview</a></h2>
Class: <a class="el" href="classwx_debug_context.html" title="A class for performing various debugging and memory tracing operations.">wxDebugContext</a><p>
<a class="el" href="classwx_debug_context.html" title="A class for performing various debugging and memory tracing operations.">wxDebugContext</a> is a class for performing various debugging and memory tracing operations.<p>
This class has only static data and function members, and there should be no instances. Probably the most useful members are SetFile (for directing output to a file, instead of the default standard error or debugger output); Dump (for dumping the dynamically allocated objects) and PrintStatistics (for dumping information about allocation of objects). You can also call Check to check memory blocks for integrity.<p>
Here's an example of use. The SetCheckpoint ensures that only the allocations done after the checkpoint will be dumped.<p>
<div class="fragment"><pre class="fragment"><a class="code" href="classwx_debug_context.html#d8b15852c0d7d2c41a9d8e49ceeb3fa1" title="Sets the current checkpoint: Dump and PrintStatistics operations will be performed...">wxDebugContext::SetCheckpoint</a>();

wxDebugContext::SetFile(<span class="stringliteral">"c:\\temp\\debug.log"</span>);

<a class="code" href="classwx_string.html" title="The wxString class has been completely rewritten for wxWidgets 3.0 and this change...">wxString</a> *thing = <span class="keyword">new</span> <a class="code" href="classwx_string.html" title="The wxString class has been completely rewritten for wxWidgets 3.0 and this change...">wxString</a>;

<span class="keywordtype">char</span> *ordinaryNonObject = <span class="keyword">new</span> <span class="keywordtype">char</span>[1000];

<a class="code" href="classwx_debug_context.html#f9cb40d2b9fda1812c4d073facde67bb" title="Performs a memory dump from the currently set checkpoint, writing to the current...">wxDebugContext::Dump</a>();
<a class="code" href="classwx_debug_context.html#675ad7ff0b4643cd75a30632dc64c0c9" title="Performs a statistics analysis from the currently set checkpoint, writing to the...">wxDebugContext::PrintStatistics</a>();
</pre></div><p>
You can use <a class="el" href="classwx_debug_context.html" title="A class for performing various debugging and memory tracing operations.">wxDebugContext</a> if __WXDEBUG__ is defined, or you can use it at any other time (if wxUSE_DEBUG_CONTEXT is set to 1 in setup.h). It is not disabled in non-debug mode because you may not wish to recompile wxWidgets and your entire application just to make use of the error logging facility.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>wxDebugContext::SetFile has a problem at present, so use the default stream instead. Eventually the logging will be done through the <a class="el" href="classwx_log.html" title="wxLog class defines the interface for the log targets used by wxWidgets logging functions...">wxLog</a> facilities instead. </dd></dl>
</div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Fri Sep 4 06:57:19 2009</tt> by <a href="http://www.doxygen.org">Doxygen</a> 1.5.8</p></td>
    <td valign="middle" align="right"><p>[ <a href="#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
