<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: wxValidator Overview</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Fri Sep 4 06:57:20 2009"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Categories</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Reference manual</a>&nbsp;&raquo&nbsp;<a class="el" href="page_topics.html">Topic Overviews</a>
  </div>
</div>
<div class="contents">
<h1><a class="anchor" name="overview_validator"><a class="el" href="classwx_validator.html" title="wxValidator is the base class for a family of validator classes that mediate between...">wxValidator</a> Overview </a></h1>Classes: <a class="el" href="classwx_validator.html" title="wxValidator is the base class for a family of validator classes that mediate between...">wxValidator</a>, <a class="el" href="classwx_text_validator.html" title="wxTextValidator validates text controls, providing a variety of filtering behaviours...">wxTextValidator</a>, <a class="el" href="classwx_generic_validator.html" title="wxGenericValidator performs data transfer (but not validation or filtering) for many...">wxGenericValidator</a><p>
<ul>
<li><a class="el" href="overview_validator.html#overview_validator_intro">Validator basic concepts</a> </li>
<li><a class="el" href="overview_validator.html#overview_validator_anatomy">Anatomy of a Validator</a> </li>
<li><a class="el" href="overview_validator.html#overview_validator_dialogs">How Validators Interact with Dialogs</a></li>
</ul>
<hr>
<h2><a class="anchor" name="overview_validator_intro">
Validator basic concepts</a></h2>
The aim of the validator concept is to make dialogs very much easier to write. A validator is an object that can be plugged into a control (such as a <a class="el" href="classwx_text_ctrl.html" title="A text control allows text to be displayed and edited.">wxTextCtrl</a>), and mediates between C++ data and the control, transferring the data in either direction and validating it. It also is able to intercept events generated by the control, providing filtering behaviour without the need to derive a new control class.<p>
You can use a stock validator, such as <a class="el" href="classwx_text_validator.html" title="wxTextValidator validates text controls, providing a variety of filtering behaviours...">wxTextValidator</a> (which does text control data transfer, validation and filtering) and <a class="el" href="classwx_generic_validator.html" title="wxGenericValidator performs data transfer (but not validation or filtering) for many...">wxGenericValidator</a> (which does data transfer for a range of controls); or you can write your own.<p>
Here is an example of <a class="el" href="classwx_text_validator.html" title="wxTextValidator validates text controls, providing a variety of filtering behaviours...">wxTextValidator</a> usage.<p>
<div class="fragment"><pre class="fragment"><a class="code" href="classwx_text_ctrl.html" title="A text control allows text to be displayed and edited.">wxTextCtrl</a> *txt1 = <span class="keyword">new</span> <a class="code" href="classwx_text_ctrl.html" title="A text control allows text to be displayed and edited.">wxTextCtrl</a>(
    <span class="keyword">this</span>, -1, <a class="code" href="group__group__funcmacro__string.html#g437ea6ba615b75dac8603e96ec864160" title="This macro can be used with character and string literals (in other words, &amp;#39;x&amp;#39;...">wxT</a>(<span class="stringliteral">""</span>), <a class="code" href="gdicmn_8h.html#403bde28270b5e64ccd9306cabb7e5e9" title="Global istance of a wxPoint initialized with values (-1,-1).">wxDefaultPosition</a>, <a class="code" href="gdicmn_8h.html#28b597c4dda355b5d3dfee5a0fc18651" title="Global instance of a wxSize object initialized to (-1,-1).">wxDefaultSize</a>, 0,
    <a class="code" href="classwx_text_validator.html" title="wxTextValidator validates text controls, providing a variety of filtering behaviours...">wxTextValidator</a>(<a class="code" href="valtext_8h.html#a02d29254d60e0c81f17696c9cecbd07b7fa483928635f2e066229fe0bceec93" title="Non-alpha characters are filtered out.">wxFILTER_ALPHA</a>, &amp;g_data.m_string));
</pre></div><p>
In this example, the text validator object provides the following functionality:<p>
<ul>
<li>It transfers the value of g_data.m_string (a <a class="el" href="classwx_string.html" title="The wxString class has been completely rewritten for wxWidgets 3.0 and this change...">wxString</a> variable) to the <a class="el" href="classwx_text_ctrl.html" title="A text control allows text to be displayed and edited.">wxTextCtrl</a> when the dialog is initialised. </li>
<li>It transfers the <a class="el" href="classwx_text_ctrl.html" title="A text control allows text to be displayed and edited.">wxTextCtrl</a> data back to this variable when the dialog is dismissed. </li>
<li>It filters input characters so that only alphabetic characters are allowed.</li>
</ul>
The validation and filtering of input is accomplished in two ways. When a character is input, <a class="el" href="classwx_text_validator.html" title="wxTextValidator validates text controls, providing a variety of filtering behaviours...">wxTextValidator</a> checks the character against the allowed filter flag (<code>wxFILTER_ALPHA</code> in this case). If the character is inappropriate, it is vetoed (does not appear) and a warning beep sounds (unless wxValidator::SetBellOnError(false) has been called). The second type of validation is performed when the dialog is about to be dismissed, so if the default string contained invalid characters already, a dialog box is shown giving the error, and the dialog is not dismissed.<p>
Note that any <a class="el" href="classwx_window.html" title="wxWindow is the base class for all windows and represents any visible object om screen...">wxWindow</a> may have a validator; using the <code>wxWS_EX_VALIDATE_RECURSIVELY</code> style (see <a class="el" href="classwx_window.html" title="wxWindow is the base class for all windows and represents any visible object om screen...">wxWindow</a> extended styles) you can also implement recursive validation.<h2><a class="anchor" name="overview_validator_anatomy">
Anatomy of a Validator</a></h2>
A programmer creating a new validator class should provide the following functionality.<p>
A validator constructor is responsible for allowing the programmer to specify the kind of validation required, and perhaps a pointer to a C++ variable that is used for storing the data for the control. If such a variable address is not supplied by the user, then the validator should store the data internally.<p>
The <a class="el" href="classwx_validator.html#be48368bac7f540f0c20b1436e5c71af" title="This overridable function is called when the value in the associated window must...">wxValidator::Validate</a> member function should return <span class="literal">true</span> if the data in the control (not the C++ variable) is valid. It should also show an appropriate message if data was not valid.<p>
The <a class="el" href="classwx_validator.html#a09f9ae3bace5de7a8e577206b75aeae" title="This overridable function is called when the value associated with the validator...">wxValidator::TransferToWindow</a> member function should transfer the data from the validator or associated C++ variable to the control.<p>
The <a class="el" href="classwx_validator.html#cffa9472b2f741ab29dbfad3b80934da" title="This overridable function is called when the value in the window must be transferred...">wxValidator::TransferFromWindow</a> member function should transfer the data from the control to the validator or associated C++ variable.<p>
There should be a copy constructor, and a <a class="el" href="classwx_validator.html#25a4e0250afe9451059fd7a967c4883f" title="All validator classes must implement the Clone() function, which returns an identical...">wxValidator::Clone</a> function which returns a copy of the validator object. This is important because validators are passed by reference to window constructors, and must therefore be cloned internally.<p>
You can optionally define event handlers for the validator, to implement filtering. These handlers will capture events before the control itself does (see <a class="el" href="overview_events.html#overview_events_processing">How Events are Processed</a>). For an example implementation, see the <code><a class="el" href="valtext_8h.html">valtext.h</a></code> and <code>valtext.cpp</code> files in the wxWidgets library.<h2><a class="anchor" name="overview_validator_dialogs">
How Validators Interact with Dialogs</a></h2>
For validators to work correctly, validator functions must be called at the right times during dialog initialisation and dismissal.<p>
When a <a class="el" href="classwx_dialog.html#e8e5fa98d473b812b8d1c2f163b65c67" title="Hides or shows the dialog.">wxDialog::Show</a> is called (for a modeless dialog) or <a class="el" href="classwx_dialog.html#6e078c3d0653f75ad3c34a37c0b54637" title="Shows a modal dialog.">wxDialog::ShowModal</a> is called (for a modal dialog), the function <a class="el" href="classwx_window.html#a90a260c0a835a133043460b7d0024a8" title="Sends an wxEVT_INIT_DIALOG event, whose handler usually transfers data to the dialog...">wxWindow::InitDialog</a> is automatically called. This in turn sends an initialisation event to the dialog. The default handler for the <code>wxEVT_INIT_DIALOG</code> event is defined in the <a class="el" href="classwx_window.html" title="wxWindow is the base class for all windows and represents any visible object om screen...">wxWindow</a> class to simply call the function <a class="el" href="classwx_window.html#88cc65e424a129d9b0057756cdb67ec9" title="Transfers values to child controls from data areas specified by their validators...">wxWindow::TransferDataToWindow</a>. This function finds all the validators in the window's children and calls the <a class="el" href="classwx_validator.html#a09f9ae3bace5de7a8e577206b75aeae" title="This overridable function is called when the value associated with the validator...">wxValidator::TransferToWindow</a> function for each. Thus, data is transferred from C++ variables to the dialog just as the dialog is being shown.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>If you are using a window or panel instead of a dialog, you will need to call <a class="el" href="classwx_window.html#a90a260c0a835a133043460b7d0024a8" title="Sends an wxEVT_INIT_DIALOG event, whose handler usually transfers data to the dialog...">wxWindow::InitDialog</a> explicitly before showing the window.</dd></dl>
When the user clicks on a button, for example the OK button, the application should first call <a class="el" href="classwx_window.html#c87f253253a0c5eb498871c83afa40fd" title="Validates the current values of the child controls using their validators.">wxWindow::Validate</a>, which returns <span class="literal">false</span> if any of the child window validators failed to validate the window data. The button handler should return immediately if validation failed. Secondly, the application should call <a class="el" href="classwx_window.html#b8e51f36e7d8790b361c8d8c6f37b1ad" title="Transfers values from child controls to data areas specified by their validators...">wxWindow::TransferDataFromWindow</a> and return if this failed. It is then safe to end the dialog by calling <a class="el" href="classwx_dialog.html#89b6085b05b63e98001311fafcfb21f0" title="Ends a modal dialog, passing a value to be returned from the ShowModal() invocation...">wxDialog::EndModal</a> (if modal) or <a class="el" href="classwx_dialog.html#e8e5fa98d473b812b8d1c2f163b65c67" title="Hides or shows the dialog.">wxDialog::Show</a> (if modeless).<p>
In fact, <a class="el" href="classwx_dialog.html" title="A dialog box is a window with a title bar and sometimes a system menu, which can...">wxDialog</a> contains a default command event handler for the <code>wxID_OK</code> button. It goes like this:<p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> wxDialog::OnOK(<a class="code" href="classwx_command_event.html" title="This event class contains information about command events, which originate from...">wxCommandEvent</a>&amp; event)
{
    <span class="keywordflow">if</span> ( <a class="code" href="classwx_window.html#c87f253253a0c5eb498871c83afa40fd" title="Validates the current values of the child controls using their validators.">Validate</a>() &amp;&amp; <a class="code" href="classwx_window.html#b8e51f36e7d8790b361c8d8c6f37b1ad" title="Transfers values from child controls to data areas specified by their validators...">TransferDataFromWindow</a>() )
    {
        <span class="keywordflow">if</span> ( <a class="code" href="classwx_dialog.html#2c135c1ae94d87a64ab6b6390fa8ce1e" title="Returns true if the dialog box is modal, false otherwise.">IsModal</a>() )
            <a class="code" href="classwx_dialog.html#89b6085b05b63e98001311fafcfb21f0" title="Ends a modal dialog, passing a value to be returned from the ShowModal() invocation...">EndModal</a>(<a class="code" href="defs_8h.html#c66d0a09761e7d86b2ac0b2e0c6a8cbbeeb1bdf97306d7f0fdffb62c8af3d02f" title="Standard button and menu IDs.">wxID_OK</a>);
        <span class="keywordflow">else</span>
        {
            <a class="code" href="classwx_dialog.html#0d04ed85ac5cd271a61514d446340673" title="Sets the return code for this window.">SetReturnCode</a>(<a class="code" href="defs_8h.html#c66d0a09761e7d86b2ac0b2e0c6a8cbbeeb1bdf97306d7f0fdffb62c8af3d02f" title="Standard button and menu IDs.">wxID_OK</a>);
            this-&gt;<a class="code" href="classwx_dialog.html#e8e5fa98d473b812b8d1c2f163b65c67" title="Hides or shows the dialog.">Show</a>(<span class="keyword">false</span>);
        }
    }
}
</pre></div><p>
So if using validators and a normal OK button, you may not even need to write any code for handling dialog dismissal.<p>
If you load your dialog from a resource file, you will need to iterate through the controls setting validators, since validators can't be specified in a dialog resource. </div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Fri Sep 4 06:57:20 2009</tt> by <a href="http://www.doxygen.org">Doxygen</a> 1.5.8</p></td>
    <td valign="middle" align="right"><p>[ <a href="#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
