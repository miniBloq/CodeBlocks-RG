<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<!-- ****************************************************** -->
<!--            Standard wxWidgets header                   -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>wxWidgets: wxSingleInstanceChecker Class Reference</title>
    <meta name="author" content="wxWidgets team"/>
    <meta name="created" content="Fri Sep 4 06:59:16 2009"/>
    <meta name="keywords" content="wxWidgets"/>
    <link href="wxwidgets.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>


<!--          End of wxWidgets standard header           -->
<!-- *************************************************** -->

<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Categories</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>wxSingleInstanceChecker Class Reference<br>
<small>
[<a class="el" href="group__group__class__appmanagement.html">Application and Process Management</a>]</small>
</h1><!-- doxytag: class="wxSingleInstanceChecker" --><code>#include &lt;wx/snglinst.h&gt;</code>
<p>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classwx_single_instance_checker.html" title="wxSingleInstanceChecker class allows to check that only a single instance of a program...">wxSingleInstanceChecker</a> class allows to check that only a single instance of a program is running. 
<p>
To do it, you should create an object of this class. As long as this object is alive, calls to <a class="el" href="classwx_single_instance_checker.html#d3588a5ae39131a129f5b886236f6c40" title="Returns true if another copy of this program is already running, false otherwise...">wxSingleInstanceChecker::IsAnotherRunning</a> from other processes will return <span class="literal">true</span>.<p>
As the object should have the life span as big as possible, it makes sense to create it either as a global or in <a class="el" href="classwx_app_console.html#99953775a2fd83fa2456e390779afe15" title="This must be provided by the application, and will usually create the application&#39;s...">wxApp::OnInit</a>. For example:<p>
<div class="fragment"><pre class="fragment">    <span class="keywordtype">bool</span> MyApp::OnInit()
    {
        <span class="keyword">const</span> <a class="code" href="classwx_string.html" title="The wxString class has been completely rewritten for wxWidgets 3.0 and this change...">wxString</a> name = <a class="code" href="classwx_string.html#ddd9ccfa3ae2b7ab2d66bcbf034d0be0" title="This static function returns the string containing the result of calling Printf()...">wxString::Format</a>(<span class="stringliteral">"MyApp-%s"</span>, <a class="code" href="group__group__funcmacro__networkuseros.html#gb1ebfcd4741550d6f7aa6f8a8952f4f3" title="This function returns the &amp;quot;user id&amp;quot; also known as &amp;quot;login name&amp;quot;...">wxGetUserId</a>().c_str());
        m_checker = <span class="keyword">new</span> <a class="code" href="classwx_single_instance_checker.html" title="wxSingleInstanceChecker class allows to check that only a single instance of a program...">wxSingleInstanceChecker</a>(name);
        <span class="keywordflow">if</span> ( m_checker-IsAnotherRunning() )
        {
            <a class="code" href="group__group__funcmacro__log.html#g0dd3c633f990f794e76065c9a7af4c87" title="The functions to use for error messages, i.e.">wxLogError</a>(<a class="code" href="group__group__funcmacro__string.html#g8a02b8875a521df57263a9e6f090f2d0" title="This macro expands into a call to wxGetTranslation(), so it marks the message for...">_</a>(<span class="stringliteral">"Another program instance is already running, aborting."</span>));

            <span class="keyword">delete</span> m_checker; <span class="comment">// OnExit() won't be called if we return false</span>
            m_checker = NULL;

            <span class="keywordflow">return</span> <span class="keyword">false</span>;
        }

        ... more initializations ...

        <span class="keywordflow">return</span> <span class="keyword">true</span>;
    }

    <span class="keywordtype">int</span> <a class="code" href="classwx_app_console.html#5ee60051c92b0b2933258799626a0485" title="Override this member function for any processing which needs to be done as the application...">MyApp::OnExit</a>()
    {
        <span class="keyword">delete</span> m_checker;

        <span class="keywordflow">return</span> 0;
    }
</pre></div><p>
Note using <a class="el" href="group__group__funcmacro__networkuseros.html#gb1ebfcd4741550d6f7aa6f8a8952f4f3" title="This function returns the &quot;user id&quot; also known as &quot;login name&quot;...">wxGetUserId()</a> to construct the name: this allows different user to run the application concurrently which is usually the intended goal. If you don't use the user name in the <a class="el" href="classwx_single_instance_checker.html" title="wxSingleInstanceChecker class allows to check that only a single instance of a program...">wxSingleInstanceChecker</a> name, only one user would be able to run the application at a time.<p>
This class is implemented for Win32 and Unix platforms (supporting <code>fcntl()</code> system call, but almost all of modern Unix systems do) only.<p>
<h2></h2>
<p>
<div><span class="lib">Library:</span>&nbsp;&nbsp;<span class="lib_text"><a class="el" href="page_libs.html#page_libs_wxbase">wxBase</a></span></div><p>
<div><span class="category">Category:</span>&nbsp;&nbsp;<span class="category_text"><a class="el" href="group__group__class__appmanagement.html">Application and Process Management</a></span></div> <table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_single_instance_checker.html#b5a56ad3ace10afc97d1c1608e40ef0c">wxSingleInstanceChecker</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Default ctor, use <a class="el" href="classwx_single_instance_checker.html#a69725041ea6c0479f65f6b468a42f1e" title="Initialize the object if it had been created using the default constructor.">Create()</a> after it.  <a href="#b5a56ad3ace10afc97d1c1608e40ef0c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_single_instance_checker.html#2abaea6e42eb24d9175a9f23d10aeed7">wxSingleInstanceChecker</a> (const <a class="el" href="classwx_string.html">wxString</a> &amp;name, const <a class="el" href="classwx_string.html">wxString</a> &amp;path=<a class="el" href="interface_2wx_2string_8h.html#9a321d587166a30017b608dd2d234033">wxEmptyString</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Like <a class="el" href="classwx_single_instance_checker.html#a69725041ea6c0479f65f6b468a42f1e" title="Initialize the object if it had been created using the default constructor.">Create()</a> but without error checking.  <a href="#2abaea6e42eb24d9175a9f23d10aeed7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_single_instance_checker.html#7ed555c3c0ec52becbb84e3702607c0f">~wxSingleInstanceChecker</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor frees the associated resources.  <a href="#7ed555c3c0ec52becbb84e3702607c0f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_single_instance_checker.html#a69725041ea6c0479f65f6b468a42f1e">Create</a> (const <a class="el" href="classwx_string.html">wxString</a> &amp;name, const <a class="el" href="classwx_string.html">wxString</a> &amp;path=<a class="el" href="interface_2wx_2string_8h.html#9a321d587166a30017b608dd2d234033">wxEmptyString</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the object if it had been created using the default constructor.  <a href="#a69725041ea6c0479f65f6b468a42f1e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classwx_single_instance_checker.html#d3588a5ae39131a129f5b886236f6c40">IsAnotherRunning</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns <span class="literal">true</span> if another copy of this program is already running, <span class="literal">false</span> otherwise.  <a href="#d3588a5ae39131a129f5b886236f6c40"></a><br></td></tr>
</table>

<p>
<a href="classwx_single_instance_checker-members.html">List of all members.</a><hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="b5a56ad3ace10afc97d1c1608e40ef0c"></a><!-- doxytag: member="wxSingleInstanceChecker::wxSingleInstanceChecker" ref="b5a56ad3ace10afc97d1c1608e40ef0c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxSingleInstanceChecker::wxSingleInstanceChecker           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Default ctor, use <a class="el" href="classwx_single_instance_checker.html#a69725041ea6c0479f65f6b468a42f1e" title="Initialize the object if it had been created using the default constructor.">Create()</a> after it. 
<p>

</div>
</div><p>
<a class="anchor" name="2abaea6e42eb24d9175a9f23d10aeed7"></a><!-- doxytag: member="wxSingleInstanceChecker::wxSingleInstanceChecker" ref="2abaea6e42eb24d9175a9f23d10aeed7" args="(const wxString &amp;name, const wxString &amp;path=wxEmptyString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxSingleInstanceChecker::wxSingleInstanceChecker           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwx_string.html">wxString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwx_string.html">wxString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em> = <code><a class="el" href="interface_2wx_2string_8h.html#9a321d587166a30017b608dd2d234033">wxEmptyString</a></code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Like <a class="el" href="classwx_single_instance_checker.html#a69725041ea6c0479f65f6b468a42f1e" title="Initialize the object if it had been created using the default constructor.">Create()</a> but without error checking. 
<p>

</div>
</div><p>
<a class="anchor" name="7ed555c3c0ec52becbb84e3702607c0f"></a><!-- doxytag: member="wxSingleInstanceChecker::~wxSingleInstanceChecker" ref="7ed555c3c0ec52becbb84e3702607c0f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wxSingleInstanceChecker::~wxSingleInstanceChecker           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destructor frees the associated resources. 
<p>
Note that it is not virtual, this class is not meant to be used polymorphically. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a69725041ea6c0479f65f6b468a42f1e"></a><!-- doxytag: member="wxSingleInstanceChecker::Create" ref="a69725041ea6c0479f65f6b468a42f1e" args="(const wxString &amp;name, const wxString &amp;path=wxEmptyString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wxSingleInstanceChecker::Create           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classwx_string.html">wxString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classwx_string.html">wxString</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>path</em> = <code><a class="el" href="interface_2wx_2string_8h.html#9a321d587166a30017b608dd2d234033">wxEmptyString</a></code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize the object if it had been created using the default constructor. 
<p>
Note that you can't call <a class="el" href="classwx_single_instance_checker.html#a69725041ea6c0479f65f6b468a42f1e" title="Initialize the object if it had been created using the default constructor.">Create()</a> more than once, so calling it if the <a class="el" href="classwx_single_instance_checker.html#b5a56ad3ace10afc97d1c1608e40ef0c">non default ctor</a> had been used is an error.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>Must be given and be as unique as possible. It is used as the mutex name under Win32 and the lock file name under Unix. GetAppName() and <a class="el" href="group__group__funcmacro__networkuseros.html#gb1ebfcd4741550d6f7aa6f8a8952f4f3" title="This function returns the &quot;user id&quot; also known as &quot;login name&quot;...">wxGetUserId()</a> are commonly used to construct this parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>The path is optional and is ignored under Win32 and used as the directory to create the lock file in under Unix (default is <a class="el" href="group__group__funcmacro__networkuseros.html#ge426408d7b659be4db51cc8296af5e7a" title="Return the (current) user&#39;s home directory.">wxGetHomeDir()</a>).</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns <span class="literal">false</span> if initialization failed, it doesn't mean that another instance is running - use <a class="el" href="classwx_single_instance_checker.html#d3588a5ae39131a129f5b886236f6c40" title="Returns true if another copy of this program is already running, false otherwise...">IsAnotherRunning()</a> to check for it.</dd></dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>One of possible reasons while Create may fail on Unix is that the lock file used for checking already exists but was not created by the user. Therefore applications shouldn't treat failure of this function as fatal condition, because doing so would open them to the possibility of a Denial of Service attack. Instead, they should alert the user about the problem and offer to continue execution without checking if another instance is running. </dd></dl>

</div>
</div><p>
<a class="anchor" name="d3588a5ae39131a129f5b886236f6c40"></a><!-- doxytag: member="wxSingleInstanceChecker::IsAnotherRunning" ref="d3588a5ae39131a129f5b886236f6c40" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool wxSingleInstanceChecker::IsAnotherRunning           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns <span class="literal">true</span> if another copy of this program is already running, <span class="literal">false</span> otherwise. 
<p>

</div>
</div><p>
</div>
<!-- ******************************************************* -->
<!--             Standard wxWidgets footer                   -->

<!-- NOTE: <br/> must go inside <p> but <hr/> must go outside -->
<p><br/></p><hr/>

<table width="100%" border="0">
<tr>
    <td align="left">
        <a href="http://www.wxwidgets.org" style="margin-left: 0px">
            <img src="powered-by-wxwidgets.png" alt="wxWidgets logo" border="0"/>
        </a>
    </td>
    <td valign="middle" align="center"><p class="footer">Page generated <tt>Fri Sep 4 06:59:16 2009</tt> by <a href="http://www.doxygen.org">Doxygen</a> 1.5.8</p></td>
    <td valign="middle" align="right"><p>[ <a href="#top" class="top">top</a> ]</p></td>
</tr>
</table>

<script src="wxwidgets.js" type="text/javascript"></script>

</body>
</html>

<!-- ***************************************************** -->
<!--         End of wxWidgets standard footer              -->
